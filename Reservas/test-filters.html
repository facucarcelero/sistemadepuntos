<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Sistema de Filtros</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .test-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .filter-card {
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .filter-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .filter-card.active {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
        .total-all {
            background-color: #f3f4f6;
        }
        .total-lunch {
            background-color: #f0fdf4;
        }
        .total-dinner {
            background-color: #f0fdf4;
        }
        .reservation-item {
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 4px solid #10b981;
        }
        .reservation-lunch {
            border-left-color: #f59e0b;
            background-color: #fffbeb;
        }
        .reservation-dinner {
            border-left-color: #8b5cf6;
            background-color: #faf5ff;
        }
        .stats {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .stat-item {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #1f2937;
        }
        .stat-label {
            color: #6b7280;
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <div class="test-card">
        <h1>üîç Test Sistema de Filtros</h1>
        <p>Prueba los filtros por turno (Almuerzo/Cena) y la exportaci√≥n a Excel.</p>
    </div>

    <!-- Filtros -->
    <div class="test-card">
        <h3>üìä Filtros por Turno</h3>
        <div class="stats">
            <div class="filter-card total-all active" data-filter="all">
                <div class="stat-number" id="total-all">12</div>
                <div class="stat-label">Total Comensales</div>
                <div style="font-size: 0.75rem; color: #6b7280; margin-top: 5px;">Click para ver todos</div>
            </div>
            <div class="filter-card total-lunch" data-filter="almuerzo">
                <div class="stat-number" id="total-lunch">5</div>
                <div class="stat-label">Total Almuerzos</div>
                <div style="font-size: 0.75rem; color: #6b7280; margin-top: 5px;">Click para filtrar</div>
            </div>
            <div class="filter-card total-dinner" data-filter="cena">
                <div class="stat-number" id="total-dinner">7</div>
                <div class="stat-label">Total Cenas</div>
                <div style="font-size: 0.75rem; color: #6b7280; margin-top: 5px;">Click para filtrar</div>
            </div>
        </div>
    </div>

    <!-- Lista de Reservas -->
    <div class="test-card">
        <h3 id="list-title">üìã Listado de Reservas</h3>
        <div id="reservations-list">
            <div class="reservation-item reservation-lunch">
                <strong>Juan P√©rez</strong> - 12:00 - 4 comensales - Almuerzo
            </div>
            <div class="reservation-item reservation-lunch">
                <strong>Mar√≠a Garc√≠a</strong> - 13:30 - 2 comensales - Almuerzo
            </div>
            <div class="reservation-item reservation-lunch">
                <strong>Carlos L√≥pez</strong> - 14:00 - 6 comensales - Almuerzo
            </div>
            <div class="reservation-item reservation-lunch">
                <strong>Ana Mart√≠nez</strong> - 12:30 - 3 comensales - Almuerzo
            </div>
            <div class="reservation-item reservation-lunch">
                <strong>Luis Rodr√≠guez</strong> - 13:00 - 5 comensales - Almuerzo
            </div>
            <div class="reservation-item reservation-dinner">
                <strong>Elena S√°nchez</strong> - 20:00 - 4 comensales - Cena
            </div>
            <div class="reservation-item reservation-dinner">
                <strong>Roberto Torres</strong> - 21:30 - 2 comensales - Cena
            </div>
            <div class="reservation-item reservation-dinner">
                <strong>Carmen Vega</strong> - 19:00 - 6 comensales - Cena
            </div>
            <div class="reservation-item reservation-dinner">
                <strong>Diego Morales</strong> - 20:30 - 3 comensales - Cena
            </div>
            <div class="reservation-item reservation-dinner">
                <strong>Patricia Ruiz</strong> - 21:00 - 5 comensales - Cena
            </div>
            <div class="reservation-item reservation-dinner">
                <strong>Fernando Silva</strong> - 19:30 - 4 comensales - Cena
            </div>
            <div class="reservation-item reservation-dinner">
                <strong>Isabel Moreno</strong> - 22:00 - 2 comensales - Cena
            </div>
        </div>
    </div>

    <!-- Bot√≥n de Exportar -->
    <div class="test-card">
        <h3>üì§ Exportar a Excel</h3>
        <button id="export-btn" style="background: #10b981; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">
            üìä Exportar Reservas Filtradas
        </button>
        <p style="font-size: 0.875rem; color: #6b7280; margin-top: 10px;">
            El archivo se exportar√° con el filtro actual aplicado
        </p>
    </div>

    <script>
        let currentFilter = 'all';
        const reservations = [
            { name: 'Juan P√©rez', time: '12:00', diners: 4, turn: 'almuerzo' },
            { name: 'Mar√≠a Garc√≠a', time: '13:30', diners: 2, turn: 'almuerzo' },
            { name: 'Carlos L√≥pez', time: '14:00', diners: 6, turn: 'almuerzo' },
            { name: 'Ana Mart√≠nez', time: '12:30', diners: 3, turn: 'almuerzo' },
            { name: 'Luis Rodr√≠guez', time: '13:00', diners: 5, turn: 'almuerzo' },
            { name: 'Elena S√°nchez', time: '20:00', diners: 4, turn: 'cena' },
            { name: 'Roberto Torres', time: '21:30', diners: 2, turn: 'cena' },
            { name: 'Carmen Vega', time: '19:00', diners: 6, turn: 'cena' },
            { name: 'Diego Morales', time: '20:30', diners: 3, turn: 'cena' },
            { name: 'Patricia Ruiz', time: '21:00', diners: 5, turn: 'cena' },
            { name: 'Fernando Silva', time: '19:30', diners: 4, turn: 'cena' },
            { name: 'Isabel Moreno', time: '22:00', diners: 2, turn: 'cena' }
        ];

        // Configurar filtros
        document.querySelectorAll('.filter-card').forEach(card => {
            card.addEventListener('click', function() {
                const filterType = this.dataset.filter;
                applyFilter(filterType);
            });
        });

        function applyFilter(filterType) {
            currentFilter = filterType;
            
            // Actualizar estilos de filtros
            document.querySelectorAll('.filter-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`[data-filter="${filterType}"]`).classList.add('active');
            
            // Filtrar reservas
            let filteredReservations = [];
            if (filterType === 'all') {
                filteredReservations = reservations;
            } else {
                filteredReservations = reservations.filter(res => 
                    res.turn.toLowerCase() === filterType.toLowerCase()
                );
            }
            
            // Actualizar lista
            updateReservationsList(filteredReservations);
            
            // Actualizar t√≠tulo
            updateTitle(filterType);
            
            console.log(`Filtro aplicado: ${filterType}, ${filteredReservations.length} reservas mostradas`);
        }

        function updateReservationsList(reservations) {
            const list = document.getElementById('reservations-list');
            list.innerHTML = '';
            
            reservations.forEach(res => {
                const item = document.createElement('div');
                item.className = `reservation-item reservation-${res.turn}`;
                item.innerHTML = `<strong>${res.name}</strong> - ${res.time} - ${res.diners} comensales - ${res.turn.charAt(0).toUpperCase() + res.turn.slice(1)}`;
                list.appendChild(item);
            });
        }

        function updateTitle(filterType) {
            const title = document.getElementById('list-title');
            let filterText = '';
            switch (filterType) {
                case 'almuerzo':
                    filterText = ' - Solo Almuerzos';
                    break;
                case 'cena':
                    filterText = ' - Solo Cenas';
                    break;
                default:
                    filterText = '';
            }
            title.textContent = `üìã Listado de Reservas${filterText}`;
        }

        // Bot√≥n de exportar
        document.getElementById('export-btn').addEventListener('click', function() {
            let filterSuffix = '';
            switch (currentFilter) {
                case 'almuerzo':
                    filterSuffix = '_almuerzos';
                    break;
                case 'cena':
                    filterSuffix = '_cenas';
                    break;
                default:
                    filterSuffix = '_todas';
            }
            
            const fileName = `reservas_${new Date().toISOString().split('T')[0]}${filterSuffix}.xlsx`;
            
            // Simular exportaci√≥n
            alert(`üìä Exportando: ${fileName}\n\nFiltro actual: ${currentFilter}\nReservas incluidas: ${document.querySelectorAll('#reservations-list .reservation-item').length}`);
        });

        // Mostrar notificaci√≥n inicial
        setTimeout(() => {
            showNotification('‚úÖ Sistema de filtros cargado correctamente', 'success');
        }, 500);

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 20px;
                border-radius: 8px;
                color: white;
                font-weight: bold;
                z-index: 1000;
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            
            if (type === 'success') {
                notification.style.backgroundColor = '#10b981';
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html> 